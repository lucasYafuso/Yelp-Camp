<%- layout('/layouts/boilerplate') %>
    <div class="container titleMap d-flex flex-column align-items-center">
        <div class="backGround"></div>
        <h1 class="text-center mb-3">Campgrounds</h1>
        <div id="cluster-map"></div>
    </div>
    
    <main class="container row d-flex justify-content-center justify-content-lg-evenly align-items-center m-0">
        <% for(let camp of camps){ %>
            <div class="card col-md-5 col-xl-3 m-3 shadow p-0">
                <% if (camp.images.length) { %>
                    <img loading="lazy" src="<%= camp.images[0].url%>" class="card-img-top" alt="camp">
                    <% }else{ %>
                        <img loading="lazy" src="https://source.unsplash.com/random/300x300?camping" class="card-img-top"
                            alt="camp">
                        <% } %>
                            <div class="card-body">
                                <h5 class="card-title">
                                    <%= camp.title %>
                                </h5>
                                <p class="card-text">
                                    <%= camp.description %>
                                </p>
                                <div class="d-grid gap-2">
                                    <a href="/campgrounds/<%= camp._id %>" class="btn btn-success">see more</a>
                                </div>

                            </div>
            </div>
            <% } %>
    </main>

    <script>
        document.getElementById('dinamicCss').href ='/stylesheets/index.css';

        const mapToken = '<%-process.env.MAPBOX_TOKEN%>'
        // @ts-ignore
        const camps = { features: <%-JSON.stringify(camps) %>}
    </script>
    <script src="/js/clusterMap.js"></script>
    <script src="/js/indexPage.js"></script>